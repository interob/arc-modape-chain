// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.158.0/containers/python-3
{
    "name": "ARC MODAPE CHAIN Container",
    "dockerComposeFile": "docker-compose.development.yml",
    "service": "arc_modape_chain",
    "initializeCommand": "sed -e \"s/{{user}}/$(id -un)/ig\" -e \"s#{{dockerfile}}#$(pwd)/.devcontainer/Dockerfile#ig\" ./src/development/vscode/.devcontainer/docker-compose.development.yml > ./.devcontainer/docker-compose.development.yml && cat ./src/docker/Dockerfile > ./.devcontainer/Dockerfile && sed -e \"s/{{user}}/$(id -un)/ig\" ./src/development/vscode/.devcontainer/Dockerfile.development >> ./.devcontainer/Dockerfile",
    // ^ Initialization does:
    //     1. Prepare docker-compose.development.yml for current user in .devcontainer subfolder
    //     2. Append Development stage to Production Dockerfile, output in .devcontainer subfolder
    "updateRemoteUserUID": true,

    "workspaceFolder": "/arc-modape-chain/src",
    "postCreateCommand": "PIP_ROOT_USER_ACTION=ignore sudo pip install --upgrade pip && cd /arc_modape_chain/modape && PIP_ROOT_USER_ACTION=ignore sudo pip install -e . && cd /arc_modape_chain/src && PIP_ROOT_USER_ACTION=ignore pip install -e .[dev]",
}
