// Use this config (or a symlink) in a .devcontainer folder which should sit
// next to the modape Git repo checked out in folder "src"
{
    "name": "ARC MODAPE CHAIN development",
    "dockerComposeFile": "docker-compose.development.yml",
    "service": "arc_modape_chain",
    "initializeCommand": "sed -e \"s/{{service}}/arc_modape_chain/ig\" -e \"s/{{user}}/$(id -un)/ig\" -e \"s#{{dockerfile}}#$(pwd)/.devcontainer/Dockerfile#ig\" -e \"s#{{context}}#$(pwd)/src/docker#ig\" ./src/development/vscode/.devcontainer/docker-compose.development.yml > ./.devcontainer/docker-compose.development.yml && cat ./src/docker/Dockerfile > ./.devcontainer/Dockerfile && sed -e \"s/{{user}}/$(id -un)/ig\" ./src/development/vscode/.devcontainer/DockerDevStage.template >> ./.devcontainer/Dockerfile",
    "updateRemoteUserUID": true,
    "workspaceFolder": "/arc_modape_chain/src",
    "postCreateCommand": "sudo pip install pytest pytest-cov \"numpy<2\" \"pandas<2\" && sudo pip install -e .[dev] --break-system-packages",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "eamodio.gitlens",
                "charliermarsh.ruff"
            ]
        }
    }
}
